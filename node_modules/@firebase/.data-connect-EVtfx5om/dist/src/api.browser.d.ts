/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { OnCompleteSubscription, OnErrorSubscription, OnResultSubscription, QueryRef, QueryUnsubscribe, SubscriptionOptions } from './api/query';
import { SerializedRef } from './api/Reference';
/**
 * Subscribe to a `QueryRef`
 * @param queryRefOrSerializedResult query ref or serialized result.
 * @param observer observer object to use for subscribing.
 * @returns `SubscriptionOptions`
 */
export declare function subscribe<Data, Variables>(queryRefOrSerializedResult: QueryRef<Data, Variables> | SerializedRef<Data, Variables>, observer: SubscriptionOptions<Data, Variables>): QueryUnsubscribe;
/**
 * Subscribe to a `QueryRef`
 * @param queryRefOrSerializedResult query ref or serialized result.
 * @param onNext Callback to call when result comes back.
 * @param onError Callback to call when error gets thrown.
 * @param onComplete Called when subscription completes.
 * @returns `SubscriptionOptions`
 */
export declare function subscribe<Data, Variables>(queryRefOrSerializedResult: QueryRef<Data, Variables> | SerializedRef<Data, Variables>, onNext: OnResultSubscription<Data, Variables>, onError?: OnErrorSubscription, onComplete?: OnCompleteSubscription): QueryUnsubscribe;
his environment."}).message),!1;try{await ve()}catch(e){return sn.warn(an.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0})().then(e=>{if(e)return n.getId()})),[o,l]=await Promise.all([o,l]),h=((e=>{var t,r=window.document.getElementsByTagName("script");for(t of Object.values(r))if(t.src&&t.src.includes(nn)&&t.src.includes(e))return t})(s)||hn(s,o.measurementId),i("js",new Date),null!=(h=null==a?void 0:a.config)?h:{});return h[en]="firebase",h.update=!0,null!=l&&(h[Zr]=l),i("config",o.measurementId,h),o.measurementId}class yn{constructor(e){this.app=e}_delete(){return delete wn[this.app.options.appId],Promise.resolve()}}let wn={},bn=[],In={},Tn="dataLayer",En="gtag",Cn,kn,Sn=!1;function An(e){if(Sn)throw an.create("already-initialized");e.dataLayerName&&(Tn=e.dataLayerName),e.gtagName&&(En=e.gtagName)}function Nn(e,t,r){n=[],ue()&&n.push("This is a browser extension environment."),_e()||n.push("Cookies are not available."),0<n.length&&(n=n.map((e,t)=>`(${t+1}) `+e).join(" "),n=an.create("invalid-analytics-context",{errorInfo:n}),sn.warn(n.message));var n=e.options.appId;if(!n)throw an.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw an.create("no-api-key");sn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wn[n])throw an.create("already-exists",{id:n});if(!Sn){{var i=Tn;let e=[];Array.isArray(window[i])?e=window[i]:window[i]=e,e}var{wrappedGtag:s,gtagCore:a}=((e,t,r,n,i)=>{let s=function(){window[n].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=un(s,e,t,r),{gtagCore:s,wrappedGtag:window[i]}})(wn,bn,In,Tn,En);kn=s,Cn=a,Sn=!0}return wn[n]=_n(e,bn,In,t,Cn,Tn,r),new yn(e)}async function Rn(){if(ue())return!1;if(!_e())return!1;if(!me())return!1;try{return await ve()}catch(e){return!1}}function Pn(e,t,r){e=w(e),(async(e,t,r,n)=>{if(n&&n.global)return e("set",{screen_name:r}),Promise.resolve();e("config",await t,{update:!0,screen_name:r})})(kn,wn[e.app.options.appId],t,r).catch(e=>sn.error(e))}function Dn(e,t,r){e=w(e),(async(e,t,r,n)=>{if(n&&n.global)return e("set",{user_id:r}),Promise.resolve();e("config",await t,{update:!0,user_id:r})})(kn,wn[e.app.options.appId],t,r).catch(e=>sn.error(e))}function xn(e,t,r){e=w(e),(async(e,t,r,n)=>{if(n&&n.global){var i,s={};for(i of Object.keys(r))s["user_properties."+i]=r[i];return e("set",s),Promise.resolve()}e("config",await t,{update:!0,user_properties:r})})(kn,wn[e.app.options.appId],t,r).catch(e=>sn.error(e))}function On(e,t){e=w(e),(async(e,t)=>{var r=await e;window["ga-disable-"+r]=!t})(wn[e.app.options.appId],t).catch(e=>sn.error(e))}function Mn(e,t,r,n){e=w(e),(async(e,t,r,n,i)=>{var s;i&&i.global?e("event",r,n):(s=await t,e("event",r,Object.assign(Object.assign({},n),{send_to:s})))})(kn,wn[e.app.options.appId],t,r,n).catch(e=>sn.error(e))}let Ln="@firebase/analytics",Fn="0.10.16";Dt(new u(Xr,(e,{options:t})=>Nn(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Dt(new u("analytics-internal",function(e){try{let n=e.getProvider(Xr).getImmediate();return{logEvent:(e,t,r)=>Mn(n,e,t,r)}}catch(e){throw an.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),d(Ln,Fn),d(Ln,Fn,"esm2017");class Un{constructor(e,t){this.app=e,this._delegate=t}logEvent(e,t,r){Mn(this._delegate,e,t,r)}setCurrentScreen(e,t){Pn(this._delegate,e,t)}setUserId(e,t){Dn(this._delegate,e,t)}setUserProperties(e,t){xn(this._delegate,e,t)}setAnalyticsCollectionEnabled(e){On(this._delegate,e)}}(t=Sm=Sm||{}).ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results";let Vn=e=>{var t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("analytics").getImmediate();return new Un(t,r)};e={Analytics:Un,settings:An,isSupported:Rn,EventName:Sm},lr.INTERNAL.registerComponent(new u("analytics-compat",Vn,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),lr.registerVersion("@firebase/analytics-compat","0.2.22");let qn=new Map,jn={activated:!1,tokenObservers:[]},Bn={initialized:!1,enabled:!1};function zn(e){return qn.get(e)||Object.assign({},jn)}let Kn="https://content-firebaseappcheck.googleapis.com/v1",Wn="exchangeDebugToken",Hn={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Gn{constructor(e,t,r,n,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=n,this.upperBound=i,this.pending=null,i<(this.nextErrorWaitInterval=n))throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Z,this.pending.promise.catch(e=>{}),t=this.getNextRun(e),await new Promise(e=>{setTimeout(e,t)}),this.pending.resolve(),await this.pending.promise,this.pending=new Z,this.pending.promise.catch(e=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}var t}getNextRun(e){var t;return e?(this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration()):(t=this.nextErrorWaitInterval,this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t)}}let $n=new we("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"});function Qn(e=!1){var t;return e?null==(t=self.grecaptcha)?void 0:t.enterprise:self.grecaptcha}function Yn(e){if(!zn(e).activated)throw $n.create("use-before-activation",{appName:e.name})}function Jn(e){var t=Math.round(e/1e3),r=Math.floor(t/86400),n=Math.floor((t-3600*r*24)/3600),i=Math.floor((t-3600*r*24-3600*n)/60),t=t-3600*r*24-3600*n-60*i;let s="";return r&&(s+=Xn(r)+"d:"),n&&(s+=Xn(n)+"h:"),s+=Xn(i)+"m:"+Xn(t)+"s"}function Xn(e){return 0===e?"00":10<=e?e.toString():"0"+e}async function Zn({url:e,body:t},r){var n={"Content-Type":"application/json"},i=r.getImmediate({optional:!0}),i=(i&&(i=await i.getHeartbeatsHeader())&&(n["X-Firebase-Client"]=i),{method:"POST",body:JSON.stringify(t),headers:n});let s;try{s=await fetch(e,i)}catch(e){throw $n.create("fetch-network-error",{originalErrorMessage:null==e?void 0:e.message})}if(200!==s.status)throw $n.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(e){throw $n.create("fetch-parse-error",{originalErrorMessage:null==e?void 0:e.message})}var n=a.ttl.match(/^([\d.]+)(s)$/);if(n&&n[2]&&!isNaN(Number(n[1])))return i=1e3*Number(n[1]),n=Date.now(),{token:a.token,expireTimeMillis:n+i,issuedAtTimeMillis:n};throw $n.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+a.ttl})}function ei(e,t){var{projectId:r,appId:n,apiKey:i}=e.options;return{url:`${Kn}/projects/${r}/apps/${n}:${Wn}?key=`+i,body:{debug_token:t}}}let ti="firebase-app-check-database",ri=1,ni="firebase-app-check-store",ii="debug-token",si=null;function ai(){return si=si||new Promise((t,r)=>{try{var e=indexedDB.open(ti,ri);e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{var t;r($n.create("storage-open",{originalErrorMessage:null==(t=e.target.error)?void 0:t.message}))},e.onupgradeneeded=e=>{var t=e.target.result;0===e.oldVersion&&t.createObjectStore(ni,{keyPath:"compositeKey"})}}catch(e){r($n.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}})}async function oi(e,t){let n=(await ai()).transaction(ni,"readwrite"),i=n.objectStore(ni).put({compositeKey:e,value:t});return new Promise((t,r)=>{i.onsuccess=e=>{t()},n.onerror=e=>{var t;r($n.create("storage-set",{originalErrorMessage:null==(t=e.target.error)?void 0:t.message}))}})}async function li(e){let t=(await ai()).transaction(ni,"readonly"),i=t.objectStore(ni).get(e);return new Promise((r,n)=>{i.onsuccess=e=>{var t=e.target.result;r(t?t.value:void 0)},t.onerror=e=>{var t;n($n.create("storage-get",{originalErrorMessage:null==(t=e.target.error)?void 0:t.message}))}})}function hi(e){return e.options.appId+"-"+e.name}let ui=new tt("@firebase/app-check");async function ci(t){if(me()){let e=void 0;try{e=await li(hi(t))}catch(e){ui.warn("Failed to read token from IndexedDB. Error: "+e)}return e}}function di(e,t){return me()?oi(hi(e),t).catch(e=>{ui.warn("Failed to write token to IndexedDB. Error: "+e)}):Promise.resolve()}async function pi(){let e=void 0;try{e=await li(ii)}catch(e){}var t,r;return e||(t=crypto.randomUUID(),r=t,oi(ii,r).catch(e=>ui.warn("Failed to persist debug token to IndexedDB. Error: "+e)),t)}function fi(){return Bn.enabled}async function gi(){var e=Bn;if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}let mi={error:"UNKNOWN_ERROR"};async function vi(e,t=!1,r=!1){var n,i=e.app;Yn(i);let s=zn(i),a=s.token,o=void 0;if(a&&!Ii(a)&&(s.token=void 0,a=void 0),a||(n=await s.cachedTokenPromise)&&(Ii(n)?a=n:await di(i,void 0)),!t&&a&&Ii(a))return{token:a.token};let l=!1;if(fi())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=Zn(ei(i,await gi()),e.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),l=!0);var h=await s.exchangeTokenPromise;return await di(i,h),{token:(s.token=h).token}}catch(e){return"appCheck/throttled"===e.code||"appCheck/initial-throttle"===e.code?ui.warn(e.message):r&&ui.error(e),Ti(e)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),l=!0),a=await zn(i).exchangeTokenPromise}catch(e){"appCheck/throttled"===e.code||"appCheck/initial-throttle"===e.code?ui.warn(e.message):r&&ui.error(e),o=e}let u;return a?o?u=Ii(a)?{token:a.token,internalError:o}:Ti(o):(u={token:a.token},await di(i,s.token=a)):u=Ti(o),l&&bi(i,u),u}function _i(t,e,r,n){var i=t.app,i=zn(i),s={next:r,error:n,type:e};if(i.tokenObservers=[...i.tokenObservers,s],i.token&&Ii(i.token)){let e=i.token;Promise.resolve().then(()=>{r({token:e.token}),wi(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>wi(t))}function yi(e,t){var r=zn(e),n=r.tokenObservers.filter(e=>e.next!==t);0===n.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function wi(e){var t=e.app,t=zn(t);let r=t.tokenRefresher;r||(r=(r=>{let n=r.app;return new Gn(async()=>{var e=zn(n);let t;if((t=e.token?await vi(r,!0):await vi(r)).error)throw t.error;if(t.internalError)throw t.internalError},()=>!0,()=>{var e,t=zn(n);return t.token?(e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,t=t.token.expireTimeMillis-3e5,e=Math.min(e,t),Math.max(0,e-Date.now())):0},Hn.RETRIAL_MIN_WAIT,Hn.RETRIAL_MAX_WAIT)})(e),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bi(e,t){var r;for(r of zn(e).tokenObservers)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(e){}}function Ii(e){return 0<e.expireTimeMillis-Date.now()}function Ti(e){return{token:(t=mi,a.encodeString(JSON.stringify(t),!1)),error:e};var t}class Ei{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){var e,t=zn(this.app).tokenObservers;for(e of t)yi(this.app,e.next);return Promise.resolve()}}function Ci(t){return{getToken:e=>vi(t,e),getLimitedUseToken:()=>(async e=>{var t=e.app,r=(Yn(t),zn(t)).provider;return fi()?{token:t=(await Zn(ei(t,await gi()),e.heartbeatServiceProvider)).token}:{token:t=(await r.getToken()).token}})(t),addTokenListener:e=>_i(t,"INTERNAL",e),removeTokenListener:e=>yi(t.app,e)}}let ki="https://www.google.com/recaptcha/api.js",Si="https://www.google.com/recaptcha/enterprise.js";function Ai(t,r){let n=new Z;zn(t).reCAPTCHAState={initialized:n};let i=Pi(t);var e,s=Qn(!1);return s?Ri(t,r,s,i,n):(e=()=>{var e=Qn(!1);if(!e)throw new Error("no recaptcha");Ri(t,r,e,i,n)},(s=document.createElement("script")).src=ki,s.onload=e,document.head.appendChild(s)),n.promise}function Ni(t,r){let n=new Z;zn(t).reCAPTCHAState={initialized:n};let i=Pi(t);var e,s=Qn(!0);return s?Ri(t,r,s,i,n):(e=()=>{var e=Qn(!0);if(!e)throw new Error("no recaptcha");Ri(t,r,e,i,n)},(s=document.createElement("script")).src=Si,s.onload=e,document.head.appendChild(s)),n.promise}function Ri(n,i,s,a,o){s.ready(()=>{var e,t,r;e=n,t=s.render(a,{sitekey:i,size:"invisible",callback:()=>{zn(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{zn(e).reCAPTCHAState.succeeded=!1}}),(r=zn(e)).reCAPTCHAState=Object.assign(Object.assign({},r.reCAPTCHAState),{widgetId:t}),o.resolve(s)})}function Pi(e){var t="fire_app_check_"+e.name,r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}async function Di(n){Yn(n);let i=await zn(n).reCAPTCHAState.initialized.promise;return new Promise((e,t)=>{let r=zn(n).reCAPTCHAState;i.ready(()=>{e(i.execute(r.widgetId,{action:"fire_app_check"}))})})}class xi{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){Fi(this._throttleData);var t,r=await Di(this._app).catch(e=>{throw $n.create("recaptcha-error")});if(null==(t=zn(this._app).reCAPTCHAState)||!t.succeeded)throw $n.create("recaptcha-error");let e;try{e=await Zn(((e,t)=>{var{projectId:r,appId:n,apiKey:i}=e.options;return{url:Kn+`/projects/${r}/apps/${n}:exchangeRecaptchaV3Token?key=`+i,body:{recaptcha_v3_token:t}}})(this._app,r),this._heartbeatServiceProvider)}catch(e){throw null!=(t=e.code)&&t.includes("fetch-status-error")?(this._throttleData=Li(Number(null==(r=e.customData)?void 0:r.httpStatus),this._throttleData),$n.create("initial-throttle",{time:Jn(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,e}initialize(e){this._app=e,this._heartbeatServiceProvider=xt(e,"heartbeat"),Ai(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof xi&&this._siteKey===e._siteKey}}class Oi{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){Fi(this._throttleData);var t,r=await Di(this._app).catch(e=>{throw $n.create("recaptcha-error")});if(null==(t=zn(this._app).reCAPTCHAState)||!t.succeeded)throw $n.create("recaptcha-error");let e;try{e=await Zn(((e,t)=>{var{projectId:r,appId:n,apiKey:i}=e.options;return{url:Kn+`/projects/${r}/apps/${n}:exchangeRecaptchaEnterpriseToken?key=`+i,body:{recaptcha_enterprise_token:t}}})(this._app,r),this._heartbeatServiceProvider)}catch(e){throw null!=(t=e.code)&&t.includes("fetch-status-error")?(this._throttleData=Li(Number(null==(r=e.customData)?void 0:r.httpStatus),this._throttleData),$n.create("initial-throttle",{time:Jn(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,e}initialize(e){this._app=e,this._heartbeatServiceProvider=xt(e,"heartbeat"),Ni(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Oi&&this._siteKey===e._siteKey}}class Mi{constructor(e){this._customProviderOptions=e}async getToken(){var e,t=await this._customProviderOptions.getToken(),r=(e=t.token,"object"==typeof(r=Ee(e).claims)&&r.hasOwnProperty("iat")?r.iat:null),r=null!==r&&r<Date.now()&&0<r?1e3*r:Date.now();return Object.assign(Object.assign({},t),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof Mi&&this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString()}}function Li(e,t){var r,n;return 404===e||403===e?{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e}:(n=He(r=t?t.backoffCount:0,1e3,2),{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e})}function Fi(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw $n.create("throttled",{time:Jn(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function Ui(e=jt(),r){var t=xt(e=w(e),"app-check");if(Bn.initialized||(i=H(),(n=Bn).initialized=!0,"string"!=typeof i.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==i.FIREBASE_APPCHECK_DEBUG_TOKEN)||(n.enabled=!0,s=new Z,n.token=s,"string"==typeof i.FIREBASE_APPCHECK_DEBUG_TOKEN?s.resolve(i.FIREBASE_APPCHECK_DEBUG_TOKEN):s.resolve(pi())),fi()&&gi().then(e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){var n=t.getImmediate(),i=t.getOptions();if(i.isTokenAutoRefreshEnabled===r.isTokenAutoRefreshEnabled&&i.provider.isEqual(r.provider))return n;throw $n.create("already-initialized",{appName:e.name})}var s=t.initialize({options:r});{var[a,r,o=!1]=[e,r.provider,r.isTokenAutoRefreshEnabled];let t=((e,t)=>(qn.set(e,t),qn.get(e)))(a,Object.assign({},jn));t.activated=!0,t.provider=r,t.cachedTokenPromise=ci(a).then(e=>(e&&Ii(e)&&(t.token=e,bi(a,{token:e.token})),e)),t.isTokenAutoRefreshEnabled=o&&a.automaticDataCollectionEnabled,!a.automaticDataCollectionEnabled&&o&&ui.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),t.provider.initialize(a)}return zn(e).isTokenAutoRefreshEnabled&&_i(s,"INTERNAL",()=>{}),s}let Vi="app-check-internal";Dt(new u("app-check",e=>{var t,r=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return e=r,t=n,new Ei(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(Vi).initialize()})),Dt(new u(Vi,e=>Ci(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),d("@firebase/app-check","0.10.0");let qi=new we("appCheck","AppCheck",{"use-before-activation":"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."});class ji{constructor(e){this.app=e}activate(e,t){let r;r="string"==typeof e?new xi(e):e instanceof Oi||e instanceof xi||e instanceof Mi?e:new Mi({getToken:e.getToken}),this._delegate=Ui(this.app,{provider:r,isTokenAutoRefreshEnabled:t})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw qi.create("use-before-activation",{appName:this.app.name});var t,r;